# ========================================
# Training Source Configuration
# ========================================
# Model: Bun Detection (YOLOv8)
# Phase: 1 (PyTorch Training)
# Created: 2025-11-27

# ========================================
# MODEL INFORMATION
# ========================================
model:
  name: "bun_detection"
  version: "1.0.0"
  type: "YOLOv8"
  task: "object_detection"
  created_date: "2025-11-27"
  author: "Firefly Team"
  description: "YOLOv8 model for detecting buns (Thai steamed buns)"

# ========================================
# CLASS INFORMATION
# ========================================
classes:
  names:
    - "bun"
  num_classes: 1

# ========================================
# INPUT SETTINGS (ðŸ”’ CRITICAL!)
# ========================================
input:
  size: [640, 640]                # ðŸ”’ YOLOv8 standard size
  channels: 3                     # ðŸ”’ RGB
  format: "RGB"                   # ðŸ”’ Model expects RGB
  dtype: "uint8"                  # ðŸ”’ 0-255 range
  layout: "NHWC"                  # ðŸ”’ For RKNN

# ========================================
# PREPROCESSING (ðŸ”’ CRITICAL!)
# ========================================
preprocessing:
  resize:
    method: "letterbox"           # ðŸ”’ Maintain aspect ratio
    
  padding:
    enabled: true                 # ðŸ”’ Yes
    color: [114, 114, 114]        # ðŸ”’ YOLO standard gray
    position: "center"            # ðŸ”’ Center the image
    
  normalize:
    enabled: true                 # ðŸ”’ Yes
    method: "divide"              # ðŸ”’ Divide by 255
    mean: [0, 0, 0]               # ðŸ”’ No mean subtraction
    std: [255, 255, 255]          # ðŸ”’ Divide by 255

# ========================================
# TRAINING PARAMETERS
# ========================================
training:
  framework: "PyTorch"
  library: "ultralytics"
  version: "8.0.0"
  
  hyperparameters:
    epochs: 300
    batch_size: 16
    optimizer: "SGD"
    learning_rate: 0.01
    weight_decay: 0.0005
    momentum: 0.937
    
  augmentation:
    - "mosaic"
    - "mixup"
    - "hsv"
    - "flip_lr"

# ========================================
# DATASET INFORMATION
# ========================================
dataset:
  name: "bun_dataset"
  train_images: 940
  val_images: 100
  source: "dataset_cls_stage2/train"

# ========================================
# MODEL ARCHITECTURE
# ========================================
architecture:
  backbone: "CSPDarknet"
  neck: "PANet"
  head: "YOLOv8Head"
  parameters: "3.2M"
  flops: "8.7G"

# ========================================
# PERFORMANCE BASELINE
# ========================================
performance:
  device: "GPU"
  
  metrics:
    mAP50: 0.95
    mAP50_95: 0.85
    precision: 0.92
    recall: 0.90
    f1_score: 0.91

# ========================================
# NOTES
# ========================================
notes:
  - "Training completed with 300 epochs"
  - "Model converged well, no overfitting"
  - "Ready for ONNX export"
