# ========================================
# ONNX Source Configuration
# ========================================
# Model: Bun Detection (YOLOv8)
# Phase: 2 (ONNX Export)
# Created: 2025-11-27

# ========================================
# INHERITED FROM TRAINING (ðŸ”’ DO NOT CHANGE!)
# ========================================
model:
  name: "bun_detection"
  version: "1.0.0"
  type: "YOLOv8"
  task: "object_detection"

classes:
  names:
    - "bun"
  num_classes: 1

input:
  size: [640, 640]                # ðŸ”’ From training
  channels: 3                     # ðŸ”’ From training
  format: "RGB"                   # ðŸ”’ From training
  dtype: "uint8"                  # ðŸ”’ From training
  layout: "NHWC"                  # ðŸ”’ From training

preprocessing:
  resize:
    method: "letterbox"           # ðŸ”’ From training
  padding:
    enabled: true                 # ðŸ”’ From training
    color: [114, 114, 114]        # ðŸ”’ From training
    position: "center"            # ðŸ”’ From training
  normalize:
    enabled: true                 # ðŸ”’ From training
    method: "divide"              # ðŸ”’ From training
    mean: [0, 0, 0]               # ðŸ”’ From training
    std: [255, 255, 255]          # ðŸ”’ From training

# ========================================
# EXPORT SETTINGS
# ========================================
export:
  tool: "ultralytics"
  version: "8.0.0"
  date: "2025-11-27"
  
  onnx:
    version: "1.12.0"
    opset: 11
    simplify: true
    dynamic_axes: false
    
  input_names:
    - "images"
    
  output_names:
    - "output0"

# ========================================
# ONNX MODEL INFORMATION
# ========================================
onnx:
  file: "best.onnx"
  
  shapes:
    input: [1, 3, 640, 640]       # NCHW format
    output: [1, 84, 8400]         # YOLOv8 output (1 class + 4 bbox)
  
  size:
    mb: 12.0
    parameters: "3.2M"
  
  verification:
    onnx_check: true              # Passed ONNX checker
    inference_test: true          # Test inference successful
    output_match_pt: true         # Output matches PyTorch

# ========================================
# REQUIREMENTS FOR RKNN CONVERSION
# ========================================
requirements_for_rknn:
  preprocessing:
    input_size: [640, 640]
    input_format: "RGB"
    resize_method: "letterbox"
    padding_color: [114, 114, 114]
    normalize:
      mean: [0, 0, 0]
      std: [255, 255, 255]
  
  model_info:
    type: "YOLOv8"
    task: "object_detection"
    classes: ["bun"]
    num_classes: 1
  
  recommended:
    platform: "rk3588"
    quantization_fp16: true
    quantization_int8: true
    optimization_level: 3
    dataset_size: 940

# ========================================
# NOTES
# ========================================
notes:
  - "ONNX export successful"
  - "Model verified and matches PyTorch output"
  - "Ready for RKNN conversion"
